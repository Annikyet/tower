import{B as h,E as C,c as r,a as i,o as s,b as m,e as f,d as o,F as l,D as v,w as k,v as E,i as g,p as B,k as b,G as x}from"./vendor.49e182a0.js";import{_ as S,c as _,P as p,C as w,A as c,e as I,t as T}from"./index.5856130a.js";const P={name:"EventPage",setup(){const n=h();return C(async()=>{try{n.name=="Event"&&(await I.getById(n.params.id),await T.getByEventId(n.params.id),await _.getEventComments(n.params.id))}catch(e){p.error(e)}}),{event:r(()=>c.currentEvent),tickets:r(()=>c.currentEventTickets),myTicket:r(()=>c.currentEventTickets.find(e=>e.accountId==c.account._id)),comments:r(()=>c.currentEventComments),commentBody:"",async createComment(){if(this.commentBody)try{const e={eventId:n.params.id,body:this.commentBody};this.commentBody="",await _.createComment(e)}catch(e){p.error(e)}}}},components:{CommentCard:w}},d=n=>(B("data-v-4740a456"),n=n(),b(),n),A={class:"event-page"},j={class:"attendance-list"},V=d(()=>o("h5",{class:"thin-text"},"Already attending:",-1)),D={class:"attendance-bar"},F=["src","alt","title"],M=d(()=>o("h5",{class:"thin-text"},"Chatter:",-1)),N=d(()=>o("div",{class:"d-flex justify-content-end"},[o("button",{class:"btn btn-primary"},"Add Comment")],-1));function G(n,e,L,a,R,U){const u=i("EventSplash"),y=i("CommentCard");return s(),m("div",A,[f(u,{event:a.event,myTicket:a.myTicket},null,8,["event","myTicket"]),o("div",j,[V,o("div",D,[(s(!0),m(l,null,v(a.tickets,t=>(s(),m("img",{key:t._id,src:t.account.picture,alt:t.account.name,title:t.account.name,class:"profile-bubble"},null,8,F))),128))])]),M,o("form",{class:"add-comment-bar",onSubmit:e[1]||(e[1]=g((...t)=>a.createComment&&a.createComment(...t),["prevent"]))},[k(o("textarea",{"onUpdate:modelValue":e[0]||(e[0]=t=>a.commentBody=t),name:"addComment",id:"addComment",class:"bg-dark text-light"},null,512),[[E,a.commentBody]]),N],32),(s(!0),m(l,null,v(a.comments,t=>(s(),x(y,{key:t._id,comment:t},null,8,["comment"]))),128))])}var H=S(P,[["render",G],["__scopeId","data-v-4740a456"]]);export{H as default};
